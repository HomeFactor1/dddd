<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #addForm {
            display: block;
            margin-top: 20px;
            background-color: #f9f9f9;
            padding: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            box-sizing: border-box;
        }

        #submitForm {
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
        }

        #submitForm:hover {
            background-color: #45a049;
        }
    </style>
</head>

<body>
    <main>
        <div id="addForm">
            <form id="formData">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required><br>

                <label for="Description01">Description 01:</label>
                <input type="text" id="Description01" name="Description01" required><br>

                <label for="Description02">Description 02:</label>
                <input type="text" id="Description02" name="Description02" required><br>

                <label for="Size">Size :</label>
                <input type="text" id="Size" name="Size" required><br>

                <label for="Bed">Bed :</label>
                <input type="text" id="Bed" name="Bed" required><br>

                <label for="Bath">Bath :</label>
                <input type="text" id="Bath" name="Bath" required><br>

                <label for="Parking">Parking :</label>
                <input type="text" id="Parking" name="Parking" required><br>

                <label for="Location">Location :</label>
                <input type="text" id="Location" name="Location" required><br>

                <label for="Price">Price :</label>
                <input type="text" id="Price" name="Price" required><br>

                <label for="mainphoto">Main Photo:</label>
                <input type="file" id="mainphoto" name="mainphoto" accept="image/*"><br>

                <label for="photo01">Photo 01:</label>
                <input type="file" id="photo01" name="photo01" accept="image/*"><br>

                <label for="photo02">Photo 02:</label>
                <input type="file" id="photo02" name="photo02" accept="image/*"><br>

                <label for="photo03">Photo 03:</label>
                <input type="file" id="photo03" name="photo03" accept="image/*"><br>

                <label for="photo04">Photo 04:</label>
                <input type="file" id="photo04" name="photo04" accept="image/*"><br>

                <label for="photo05">Photo 05:</label>
                <input type="file" id="photo05" name="photo05" accept="image/*"><br>

                <label for="photo06">Photo 06:</label>
                <input type="file" id="photo06" name="photo06" accept="image/*"><br>

                <label for="photo07">Photo 07:</label>
                <input type="file" id="photo07" name="photo07" accept="image/*"><br>

                <label for="photo08">Photo 08:</label>
                <input type="file" id="photo08" name="photo08" accept="image/*"><br>

                <label for="photo09">Photo 09:</label>
                <input type="file" id="photo09" name="photo09" accept="image/*"><br>

                <label for="photo10">Photo 10:</label>
                <input type="file" id="photo10" name="photo10" accept="image/*"><br>

                <label for="photo11">Photo 11:</label>
                <input type="file" id="photo11" name="photo11" accept="image/*"><br>

                <label for="photo12">Photo 12:</label>
                <input type="file" id="photo12" name="photo12" accept="image/*"><br>

                <label for="photo13">Photo 13:</label>
                <input type="file" id="photo13" name="photo13" accept="image/*"><br>

                <label for="photo14">Photo 14:</label>
                <input type="file" id="photo14" name="photo14" accept="image/*"><br>

                <label for="photo15">Photo 15:</label>
                <input type="file" id="photo15" name="photo15" accept="image/*"><br>

                <label for="photo16">Photo 16:</label>
                <input type="file" id="photo16" name="photo16" accept="image/*"><br>

                <label for="photo17">Photo 17:</label>
                <input type="file" id="photo17" name="photo17" accept="image/*"><br>

                <label for="photo18">Photo 18:</label>
                <input type="file" id="photo18" name="photo18" accept="image/*"><br>

                <label for="photo19">photo 19:</label>
                <input type="file" id="photo19" name="photo19" accept="image/*"><br>

                <button type="button" id="submitForm">Add</button>
            </form>
        </div>
    </main>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-storage.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: 'AIzaSyDnoUZxg_ru1gGmytgIKHrD1AELExOChqA',
            authDomain: 'home-factor-ef593.firebaseapp.com',
            databaseURL: 'https://home-factor-ef593-default-rtdb.firebaseio.com',
            projectId: 'home-factor-ef593',
            storageBucket: 'home-factor-ef593.appspot.com',
            messagingSenderId: '761124995145',
            appId: '1:761124995145:web:fa5b3b10ee99e7399a3f98',
            measurementId: 'G-NVZXSGL2XV',
        };

        firebase.initializeApp(firebaseConfig);

        var db = firebase.firestore();
        var storage = firebase.storage().ref();

        document.getElementById('submitForm').addEventListener('click', function () {
            // Get form values
            var name = document.getElementById('name').value;
            var Description01 = document.getElementById('Description01').value;
            var Description02 = document.getElementById('Description02').value;
            var Size = document.getElementById('Size').value;
            var Bed = document.getElementById('Bed').value;
            var Bath = document.getElementById('Bath').value;
            var Parking = document.getElementById('Parking').value;
            var Location = document.getElementById('Location').value;
            var Price = document.getElementById('Price').value;
            var MainPhoto = document.getElementById('mainphoto').files[0];
            var Photo01 = document.getElementById('photo01').files[0];
            var Photo02 = document.getElementById('photo02').files[0];
            var Photo03 = document.getElementById('photo03').files[0];
            var Photo04 = document.getElementById('photo04').files[0];
            var Photo05 = document.getElementById('photo05').files[0];
            var Photo06 = document.getElementById('photo06').files[0];
            var Photo07 = document.getElementById('photo07').files[0];
            var Photo08 = document.getElementById('photo08').files[0];
            var Photo09 = document.getElementById('photo09').files[0];
            var Photo10 = document.getElementById('photo10').files[0];
            var Photo11 = document.getElementById('photo11').files[0];
            var Photo12 = document.getElementById('photo12').files[0];
            var Photo13 = document.getElementById('photo13').files[0];
            var Photo14 = document.getElementById('photo14').files[0];
            var Photo15 = document.getElementById('photo15').files[0];
            var Photo16 = document.getElementById('photo16').files[0];
            var Photo17 = document.getElementById('photo17').files[0];
            var Photo18 = document.getElementById('photo18').files[0];
            var Photo19 = document.getElementById('photo19').files[0];


            // Handle each photo upload separately
            const uploadTasks = [];

            if (MainPhoto) uploadTasks.push(storage.child('photos').child(name + '_MainPhoto.jpg').put(MainPhoto));
            if (Photo01) uploadTasks.push(storage.child('photos').child(name + '_Photo01.jpg').put(Photo01));
            if (Photo02) uploadTasks.push(storage.child('photos').child(name + '_Photo02.jpg').put(Photo02));
            if (Photo03) uploadTasks.push(storage.child('photos').child(name + '_Photo03.jpg').put(Photo03));
            if (Photo04) uploadTasks.push(storage.child('photos').child(name + '_Photo04.jpg').put(Photo04));
            if (Photo05) uploadTasks.push(storage.child('photos').child(name + '_Photo05.jpg').put(Photo05));
            if (Photo06) uploadTasks.push(storage.child('photos').child(name + '_Photo06.jpg').put(Photo06));
            if (Photo07) uploadTasks.push(storage.child('photos').child(name + '_Photo07.jpg').put(Photo07));
            if (Photo08) uploadTasks.push(storage.child('photos').child(name + '_Photo08.jpg').put(Photo08));
            if (Photo09) uploadTasks.push(storage.child('photos').child(name + '_Photo09.jpg').put(Photo09));
            if (Photo10) uploadTasks.push(storage.child('photos').child(name + '_Photo10.jpg').put(Photo10));
            if (Photo11) uploadTasks.push(storage.child('photos').child(name + '_Photo11.jpg').put(Photo11));
            if (Photo12) uploadTasks.push(storage.child('photos').child(name + '_Photo12.jpg').put(Photo12));
            if (Photo13) uploadTasks.push(storage.child('photos').child(name + '_Photo13.jpg').put(Photo13));
            if (Photo14) uploadTasks.push(storage.child('photos').child(name + '_Photo14.jpg').put(Photo14));
            if (Photo15) uploadTasks.push(storage.child('photos').child(name + '_Photo15.jpg').put(Photo15));
            if (Photo16) uploadTasks.push(storage.child('photos').child(name + '_Photo16.jpg').put(Photo16));
            if (Photo17) uploadTasks.push(storage.child('photos').child(name + '_Photo17.jpg').put(Photo17));
            if (Photo18) uploadTasks.push(storage.child('photos').child(name + '_Photo18.jpg').put(Photo18));
            if (Photo19) uploadTasks.push(storage.child('photos').child(name + '_Photo19.jpg').put(Photo19));


            // Wait for all uploads to complete
            Promise.all(uploadTasks.map(task => task.then(snapshot => snapshot.ref.getDownloadURL())))
                .then(downloadURLs => {
                    // Create an object with form data and download URLs
                    const formData = {
                        Name: name,
                        Description01: Description01,
                        Description02: Description02,
                        Size: Size,
                        Bed: Bed,
                        Bath: Bath,
                        Parking: Parking,
                        Location: Location,
                        Price: Price,
                        MainPhoto: downloadURLs[0] || null,
                        Photo01: downloadURLs[1] || null,
                        Photo02: downloadURLs[2] || null,
                        Photo03: downloadURLs[3] || null,
                        Photo04: downloadURLs[4] || null,
                        Photo05: downloadURLs[5] || null,
                        Photo06: downloadURLs[6] || null,
                        Photo07: downloadURLs[7] || null,
                        Photo08: downloadURLs[8] || null,
                        Photo09: downloadURLs[9] || null,
                        Photo10: downloadURLs[10] || null,
                        Photo11: downloadURLs[11] || null,
                        Photo12: downloadURLs[12] || null,
                        Photo13: downloadURLs[13] || null,
                        Photo14: downloadURLs[14] || null,
                        Photo15: downloadURLs[15] || null,
                        Photo16: downloadURLs[16] || null,
                        Photo17: downloadURLs[17] || null,
                        Photo18: downloadURLs[18] || null,
                        Photo19: downloadURLs[19] || null,

                    };

                    // Add the data to Firestore
                    db.collection('items').add(formData).then(() => {
                        // Redirect to admin.html or perform any other action
                        window.location.href = 'admin.html';
                    }).catch((error) => {
                        console.error('Error adding document to Firestore: ', error);
                    });
                })
                .catch(function (error) {
                    console.error('Error uploading files: ', error);
                });
        });
    </script>
</body>

</html>
